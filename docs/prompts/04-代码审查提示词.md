# 代码审查提示词

本文档包含代码审查的提示词模板，用于确保代码质量和一致性。

## 基础审查模板

### 提示词：代码审查

```
请帮我审查 MultiForms 项目的以下代码。

# 项目规范

## 设计原则
1. **深色主题优先** - 默认使用深色主题
2. **禁用 Emoji 作为图标** - 使用 SVG 内联图标
3. **必须有 Hover 状态** - 所有交互元素需要 hover 反馈
4. **禁止布局抖动** - Hover 效果不应导致布局变化
5. **品牌渐变色** - 使用定义的渐变色 #6366F1 → #8B5CF6
6. **适度玻璃态** - 有节制地使用玻璃态效果
7. **中文为主** - 主要语言为简体中文

## 代码规范
- TypeScript 严格模式
- ESLint 规则
- 组件化开发
- 单一职责原则
- 错误处理

# 待审查代码

[粘贴代码或提供文件路径]

# 审查重点

请检查以下方面：

1. **设计一致性**
   - [ ] 颜色使用是否符合设计系统
   - [ ] 字体使用是否正确
   - [ ] 间距是否符合规范
   - [ ] 圆角是否统一

2. **交互体验**
   - [ ] 是否有 hover 状态
   - [ ] 是否有 focus 状态
   - [ ] 是否有 loading 状态
   - [ ] 是否有 error 状态

3. **响应式设计**
   - [ ] 是否支持移动端
   - [ ] 断点是否正确
   - [ ] 布局是否合理

4. **代码质量**
   - [ ] 类型定义是否完整
   - [ ] 是否有错误处理
   - [ ] 代码是否可读
   - [ ] 是否有注释

5. **性能**
   - [ ] 是否有不必要的渲染
   - [ ] 是否有内存泄漏
   - [ ] 是否正确使用缓存

6. **可访问性**
   - [ ] 是否有 ARIA 属性
   - [ ] 是否支持键盘导航
   - [ ] 颜色对比度是否足够

# 输出要求

1. 列出发现的问题（按优先级排序）
2. 提供修复建议
3. 给出改进后的代码示例（如有必要）
4. 标注问题严重程度（高/中/低）
```

## 分类审查模板

### 1. 设计一致性审查

```
# 设计一致性审查

请审查以下代码的设计一致性。

# 设计规范

## 颜色
```css
--primary-start: #6366F1
--primary-end: #8B5CF6
--primary-glow: #A78BFA
--accent-pink: #EC4899
--accent-cyan: #06B6D4
--bg-primary: #0F0F23
--bg-secondary: #1A1A2E
--text-primary: #F8FAFC
--text-secondary: #94A3B8
```

## 圆角
```css
--radius-sm: 8px
--radius-md: 12px
--radius-lg: 20px
--radius-xl: 24px
```

## 间距
```css
--space-xs: 4px
--space-sm: 8px
--space-md: 16px
--space-lg: 24px
--space-xl: 32px
--space-2xl: 48px
```

## 字体
- Headings: Space Grotesk
- Body: DM Sans
- Code: JetBrains Mono

# 待审查代码

[粘贴代码或提供文件路径]

# 审查要点

- [ ] 是否使用了硬编码颜色（应使用 CSS 变量）
- [ ] 是否使用了硬编码间距（应使用 spacing token）
- [ ] 是否使用了硬编码圆角（应使用 radius token）
- [ ] 字体使用是否正确
- [ ] 图标是否使用 SVG（而非 emoji）
- [ ] 渐变色是否使用品牌色

# 输出要求

1. 列出所有违反设计规范的地方
2. 提供符合规范的修改建议
```

### 2. React 组件审查

```
# React 组件审查

请审查以下 React 组件的代码质量。

# 组件代码

[粘贴组件代码]

# 审查要点

## 组件设计
- [ ] 组件职责是否单一
- [ ] Props 接口是否清晰
- [ ] 是否合理拆分子组件
- [ ] 是否有重复代码

## 性能
- [ ] 是否有不必要的 re-render
- [ ] 是否需要使用 useMemo/useCallback
- [ ] 是否有大量计算可以缓存
- [ ] 列表渲染是否使用 key

## Hooks 使用
- [ ] useEffect 依赖是否正确
- [ ] 是否有内存泄漏（清理副作用）
- [ ] 自定义 Hook 是否可复用

## 状态管理
- [ ] 状态是否合理提升
- [ ] 是否使用 Context 或状态管理库
- [ ] 状态更新是否正确

## 类型安全
- [ ] Props 是否有类型定义
- [ ] 是否使用了 any 类型
- [ ] 是否处理了 undefined/null

## 错误处理
- [ ] 是否有错误边界
- [ ] API 调用是否有错误处理
- [ ] 用户是否有错误反馈

# 输出要求

1. 列出发现的问题
2. 提供改进建议
3. 给出优化后的代码示例
```

### 3. CSS/Tailwind 审查

```
# CSS/Tailwind 审查

请审查以下样式代码。

# 样式代码

[粘贴 CSS/Tailwind 代码]

# 审查要点

## Tailwind 使用
- [ ] 是否使用了硬编码值（应使用 Tailwind 类）
- [ ] 是否有重复的类名
- [ ] 是否可以使用 @apply 简化
- [ ] 是否正确使用响应式前缀

## 性能
- [ ] 是否有未使用的 CSS
- [ ] 是否有深层选择器
- [ ] 是否使用了 !important

## 可维护性
- [ ] 是否应该提取为组件
- [ ] 是否应该提取为变量
- [ ] 命名是否清晰

## 响应式
- [ ] 是否支持移动端
- [ ] 断点使用是否合理
- [ ] 是否有布局问题

# 输出要求

1. 列出样式问题
2. 提供优化建议
3. 给出改进后的样式
```

### 4. TypeScript 审查

```
# TypeScript 审查

请审查以下 TypeScript 代码的类型安全。

# 代码

[粘贴 TypeScript 代码]

# 审查要点

## 类型定义
- [ ] 是否有明确的类型定义
- [ ] 是否使用了 any（应避免）
- [ ] 是否正确使用泛型
- [ ] 接口设计是否合理

## 类型安全
- [ ] 是否处理了 null/undefined
- [ ] 是否有类型断言（应避免）
- [ ] 是否正确使用类型守卫
- [ ] 联合类型是否正确处理

## 最佳实践
- [ ] 是否使用 type vs interface 正确
- [ ] 是否使用 enum（应使用常量对象）
- [ ] 是否正确使用 utility types

# 输出要求

1. 列出类型安全问题
2. 提供改进建议
3. 给出类型安全的代码
```

### 5. 性能审查

```
# 性能审查

请审查以下代码的性能问题。

# 代码

[粘贴代码]

# 审查要点

## 渲染性能
- [ ] 是否有不必要的 re-render
- [ ] 组件是否可以 memo 化
- [ ] 大列表是否虚拟化
- [ ] 图片是否懒加载

## 网络请求
- [ ] 是否有重复请求
- [ ] 是否使用了请求缓存
- [ ] 是否可以合并请求
- [ ] 是否有请求取消

## 内存使用
- [ ] 是否有内存泄漏
- [ ] 是否正确清理副作用
- [ ] 大数据是否分页处理

## 打包体积
- [ ] 是否正确使用动态导入
- [ ] 是否有未使用的代码
- [ ] 依赖是否可以优化

# 输出要求

1. 列出性能问题
2. 分析性能影响
3. 提供优化方案
4. 给出优化后的代码
```

### 6. 安全审查

```
# 安全审查

请审查以下代码的安全问题。

# 代码

[粘贴代码]

# 审查要点

## XSS 防护
- [ ] 用户输入是否正确转义
- [ ] 是否使用 dangerouslySetInnerHTML
- [ ] URL 参数是否验证

## 注入防护
- [ ] SQL 查询是否参数化
- [ ] 命令注入风险
- [ ] 路径遍历风险

## 认证授权
- [ ] 敏感操作是否验证权限
- [ ] Token 是否安全存储
- [ ] 密码是否正确处理
- [ ] 是否存在后门账号或硬编码密码
- [ ] 环境变量是否在使用前验证

## 数据保护
- [ ] 敏感数据是否加密
- [ ] 错误信息是否泄露信息
- [ ] 日志是否包含敏感数据

## 密码与密钥
- [ ] 是否使用 `crypto.getRandomValues()` 而非 `Math.random()`
- [ ] ID/令牌生成是否使用安全的随机源
- [ ] 密码比对是否使用常量时间比较（防时序攻击）

# 输出要求

1. 列出安全问题
2. 评估风险等级
3. 提供修复方案
```

### 7. 可访问性审查

```
# 可访问性审查

请审查以下代码的可访问性。

# 代码

[粘贴 HTML/React 代码]

# 审查要点

## 语义化 HTML
- [ ] 是否使用正确的标签
- [ ] 是否有 heading 层级
- [ ] 列表是否使用 ul/ol

## ARIA 属性
- [ ] 交互元素是否有正确 role
- [ ] 是否有 aria-label
- [ ] 状态是否正确传达

## 键盘导航
- [ ] 是否可以使用 Tab 导航
- [ ] 焦点是否可见
- [ ] 是否有焦点陷阱

## 屏幕阅读器
- [ ] 图片是否有 alt
- [ ] 表单是否有关联 label
- [ ] 错误是否正确传达

## 颜色对比
- [ ] 文字对比度是否足够（4.5:1）
- [ ] 颜色是否不是唯一指示

# 输出要求

1. 列出可访问性问题
2. 提供 WCAG 合规建议
3. 给出改进后的代码
```

## 常见问题清单

### 设计问题

| 问题 | 检查方法 | 修复建议 |
|------|----------|----------|
| 硬编码颜色 | 搜索 `#[0-9A-Fa-f]{6}` | 使用 CSS 变量 |
| 硬编码间距 | 搜索具体数值 | 使用 spacing token |
| 使用 emoji 图标 | 搜索 emoji 字符 | 替换为 SVG |
| 缺少 hover 状态 | 检查交互元素 | 添加 :hover 样式 |
| 布局抖动 | 检查 hover 变化 | 使用 transform 而非 margin/padding |

### React 问题

| 问题 | 检查方法 | 修复建议 |
|------|----------|----------|
| 不必要的 re-render | 使用 React DevTools Profiler | 使用 memo/useMemo/useCallback |
| useEffect 依赖错误 | 检查依赖数组 | 正确声明依赖 |
| 内存泄漏 | 检查副作用清理 | 添加 cleanup 函数 |
| any 类型 | 搜索 `: any` | 定义具体类型 |
| 缺少错误处理 | 检查 API 调用 | 添加 try/catch |

### 性能问题

| 问题 | 检查方法 | 修复建议 |
|------|----------|----------|
| 大列表卡顿 | 检查列表长度 | 使用虚拟化 |
| 未优化的图片 | 检查 img 标签 | 添加懒加载 |
| 重复请求 | 检查网络面板 | 添加缓存/防抖 |
| 打包体积大 | 检查 bundle 分析 | 代码分割/Tree Shaking |

### 安全问题

| 问题 | 检查方法 | 修复建议 |
|------|----------|----------|
| 硬编码密码 | 搜索常见测试密码如 `demo123` | 移除所有后门密码 |
| 环境变量未验证 | 搜索直接使用 `process.env.XXX` | 使用验证工具函数 |
| 使用不安全随机数 | 搜索 `Math.random()` | 使用 `crypto.getRandomValues()` |
| 非空断言滥用 | 搜索 `!` 操作符 | 添加明确的 null/undefined 检查 |
| 缺少请求取消 | 检查 useEffect 中的异步操作 | 使用 AbortController |
| 使用原生 alert/confirm | 搜索 `alert(` 和 `confirm(` | 使用自定义 UI 组件 |

## 审查检查清单

### 提交前检查

```
## 代码质量
- [ ] 代码通过 ESLint 检查
- [ ] 代码通过 TypeScript 类型检查
- [ ] 代码格式正确（Prettier）
- [ ] 没有注释掉的代码
- [ ] 没有调试用的 console.log

## 功能完整性
- [ ] 功能按照需求实现
- [ ] 边界情况已处理
- [ ] 错误情况已处理
- [ ] Loading 状态已实现

## 用户体验
- [ ] 所有交互有反馈
- [ ] 响应式适配正确
- [ ] 移动端可用
- [ ] 无障碍访问支持

## 测试
- [ ] 单元测试已编写
- [ ] 测试覆盖充分
- [ ] 测试全部通过

## 文档
- [ ] 复杂逻辑有注释
- [ ] API 变更有说明
- [ ] README 已更新（如需要）
```

### PR 审查清单

```
## 代码变更
- [ ] 变更范围合理
- [ ] 没有引入破坏性变更（或已说明）
- [ ] 没有引入新依赖（或已说明理由）

## 代码质量
- [ ] 代码风格一致
- [ ] 没有代码重复
- [ ] 命名清晰易懂
- [ ] 复杂逻辑有注释

## 测试
- [ ] 新功能有测试
- [ ] 测试覆盖充分
- [ ] 现有测试未破坏

## 文档
- [ ] PR 描述清晰
- [ ] 变更原因已说明
- [ ] 相关文档已更新
```

## 反馈模板

### 问题反馈格式

```markdown
## 问题：[简短描述]

**严重程度**：高/中/低

**位置**：[文件路径:行号]

**问题描述**
[详细描述问题]

**建议修复**
[提供修复建议或代码]

**影响范围**
[描述影响的功能/组件]
```

### 改进建议格式

```markdown
## 建议：[简短描述]

**类型**：优化/重构/增强

**当前实现**
[描述当前实现方式]

**建议改进**
[描述改进方案]

**预期收益**
[描述改进后的好处]
```
